<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #box{width: 150px; cursor: pointer; height: 150px; background: red; position: absolute; left:0; top:0;}
    </style>
</head>
<body>
    <div id="box"></div>
</body>
</html>
<script>

    var oBox = document.getElementById("box");

    var w = document.documentElement.clientWidth || document.body.clientWidth;
    var h = document.documentElement.clientHeight || document.body.clientHeight;

    oBox.onmousedown = function (event) {
        var e = event || window.event;
        var disX = e.clientX - oBox.offsetLeft;
        var disY = e.clientY - oBox.offsetTop;
        if(typeof oBox.setCapture !== 'undefined'){
            oBox.setCapture();
        }
       document.onmousemove = function (event) {
           var e = event || window.event;
           var l = e.clientX - disX;
           var t = e.clientY - disY;
           if(l <= 0){
               l = 0;
           }
           if(t <= 0){
               t = 0;
           }
           if(l > w - oBox.offsetWidth){
                l = w - oBox.offsetWidth;
           }
           if(t > h - oBox.offsetHeight){
               t = h - oBox.offsetHeight;
           }
           oBox.style.left = l + "px";
           oBox.style.top = t + "px";
           console.log("X:" + e.clientX + "Y:" + e.clientY);
       }
       document.onmouseup = function () {
           document.onmousemove = null;
           document.onmouseup = null;
           //修复低版本ie bug
           if(typeof oBox.releaseCapture!='undefined'){
               oBox.releaseCapture();
           }
       }
    }

</script>
